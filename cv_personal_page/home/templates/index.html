{% load static %}
{% load i18n %}

{% get_current_language as CURRENT_LANGUAGE %}
{% get_available_languages as AVAILABLE_LANGUAGES %}
{% get_language_info_list for AVAILABLE_LANGUAGES as languages %}

<!DOCTYPE html>
<html lang="en" data-theme="luxury">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{personal_info.name}}</title>

    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />

    <style type="text/css">
        .section {
            scroll-snap-align: start;
        }

        .js-loading * {
            visibility: hidden;
        }
    </style>

    <script>
        const csrftoken = '{{ csrf_token }}';
    </script>

    <script type="module" src="{% static '/js/main.js' %}?v=1.0.3"></script>

    <script src="https://cdn.tailwindcss.com" defer></script>
</head>

<body class="js-loading overflow-hidden">
    <div class="absolute h-full w-full -z-20" style="background-image: url({% static 'background.jpg' %}); background-size: cover;"></div>
    <div id="overlay" class="absolute h-full w-full bg-base-100/10 -z-10"></div>
    <div class="flex flex-col h-screen w-screen">
        <nav id="nav-bar" class="navbar bg-base-200 md:p-5">
            <div class="relative max-md:inline-block md:flex navbar-start">
                <button id="navigation-menu-button" class="btn btn-ghost md:hidden">
                    <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"/>
                    </svg>
                </button>
                <div class="bg-base-200 max-md:hidden max-md:absolute max-md:z-10 max-md:mt-5 max-md:rounded-md max-md:shadow-lg" id="navigation-menu" role="menu" aria-orientation="vertical" aria-labelledby="menu-button">
                    <ul class="md:flex">
                        <li><a class="btn btn-ghost text-xl" href="#home">{{ home_link_text }}</a></li>
                        <li><a class="btn btn-ghost text-xl" href="#biography">{{ biography_link_text }}</a></li>
                        <li><a class="btn btn-ghost text-xl" href="#experience">{{ experience_link_text }}</a></li>
                    </ul>
                </div>
            </div>
            <div class="relative inline-block navbar-end text-end">
                <button id="language-menu-button" class="btn btn-ghost">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" aria-hidden="true" fill="none" viewBox="0 0 24 24">
                        <path stroke="currentColor" stroke-width="2" d="M12,23 C18.0751322,23 23,18.0751322 23,12 C23,5.92486775 18.0751322,1 12,1 C5.92486775,1 1,5.92486775 1,12 C1,18.0751322 5.92486775,23 12,23 Z M12,23 C15,23 16,18 16,12 C16,6 15,1 12,1 C9,1 8,6 8,12 C8,18 9,23 12,23 Z M2,16 L22,16 M2,8 L22,8"></path>
                    </svg>
                </button>
                <div class="bg-base-200 hidden absolute right-0 z-10 mt-5 rounded-md shadow-lg p-2" id="language-menu" role="menu" aria-orientation="vertical" aria-labelledby="menu-button">
                    <ul class="flex flex-col space-y-2 text-start">
                        {% for language in languages %}
                        <li>
                            <button onclick="changeLanguage('{% url 'set_language' %}', '{{ language.code }}');" class="btn btn-ghost text-xl p-2 block text-start {% if language.code == CURRENT_LANGUAGE %}btn-active{% endif %}">
                                {{ language.name_local | title }}
                            </button>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </nav>

        <progress id="progress-bar" class="flex progress w-full h-5" value="0" max="100"></progress>

        <div class="flex-grow flex overflow-hidden w-full">
            <div id="container" class="flex-1 bg-scroll overflow-y-scroll w-full" style="scroll-snap-type: y mandatory;">
                <div class="max-w-screen-lg text-base-content align-middle px-2 mx-auto">
                    <div id="home" class="section flex flex-col py-5 text-primary-content min-h-screen pb-20">
                        <h1 class="text-5xl font-bold text-center mb-auto">
                            {{ personal_info.name }}
                        </h1>
                    </div>
                    <div id="biography" class="section py-5 text-left space-y-4 min-h-screen pb-20">
                        <p>{{ personal_info.biography|linebreaksbr }}</p>
                    </div>
                    <div id="experience" class="section py-5 text-left space-y-4 min-h-screen">
                        {% for exp in experience %}
                        <div class="p-5 border-solid border-2 border-yellow-700 rounded-lg">
                            <div class="pb-10">
                                <h2 class="text-3xl bold">{{ exp.title }} at {{ exp.company }}</h2> <!-- TODO: translations -->
                                <div class="text-sm text-yellow-700">
                                    <p>{{ exp.start_date }} - {% if exp.end_date %}{{ exp.end_date }}{% else %}Present{% endif %}</p> <!-- TODO: translations -->
                                    <p>{{ exp.location }}</p>
                                </div>
                            </div>
                            <p>{{ exp.description|linebreaksbr }}</p>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
